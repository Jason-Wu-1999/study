

## [470. 用 Rand7() 实现 Rand10()](https://leetcode-cn.com/problems/implement-rand10-using-rand7/)

我们有一个rand7的函数，希望实现rand5。 我们只需要不断的采样，如果得到的值是小于等于5的，我们直接return就行。如果是大于等于5的，我们拒绝重新采样就行。 这样1-5出现的概率一定是一样的（rand7里也是一样的，只不过概率是1/7），又我们拒绝了6，7，那么1-5出现的概率就都是20%啦。

#### Rand7() 实现Rand5() :直接采样拒绝就可以实现

我们有一个rand7的函数，希望实现rand5。 我们只需要不断的采样，如果得到的值是小于等于5的，我们直接return就行。如果是大于等于5的，我们拒绝重新采样就行。 这样1-5出现的概率一定是一样的（rand7里也是一样的，只不过概率是1/7），又我们拒绝了6，7，那么1-5出现的概率就都是20%啦。

> ==所以现在的目的就是要使用rand7()能生成等概率的大于 10的数==

试试把`rand7()`放大固定的倍数那首先想到的办法是乘个两倍试一试，每个rand7() 它能生成数的范围是 1～7，rand 两次，那么数的范围就变为 2～14发现没有1 还是不行

  **想到如下公式**

```
(rand7()-1)*rand7()
```

#### 为什么不是乘 其他的倍数 而是乘7 

因为只有`*7`是等概率的   

```
rand7()     1 2 3 4 5 6 7
-1          0 1 2 3 4 5 6
*7          0 7 14 21 28 35 42
+rand7()    生成1-49 的概率的数
```

此时可以把  `>10`的数全部拒绝，重新生成，但是效率低 49个数中只选10个

故选   1-40对10取余得到   等概率的0-9   对这个数+1就行

```
func rand10() int {
    // 随机生成等概率的 1-49
    num:=(rand7()-1)*rand7()
    for num>40{
         num=(rand7()-1)*rand7()
    }
    return 1+num%10
    
}
```

